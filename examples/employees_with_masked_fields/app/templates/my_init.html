
 <!-- This is a modified version of appbuilder/init.html template.
      It was changed to load modified versions of ab.js and ab_filters.js (now called MY_ab.js and MY_ab_filters). 
      Also loads cleave.js to format numbers and an auxiliaray script that 'localizes' the datetimepicker object
      according to the current 'locale'/language set in F.A.B (flags menu).
      Additionally, creates the global variable 'js_locale_definitions', which will be visible on every page and scripts.
 -->

{% import 'appbuilder/baselib.html' as baselib with context %}


{% if appbuilder %}
    {% set app_name = appbuilder.app_name %}
{% endif %}

<!DOCTYPE html>
<html>
  <head>
    <title>{% block page_title %}{{app_name}}{% endblock %}</title>

    {% block head_meta %}
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
    {% endblock %}
    {% block head_css %}
        <link href="{{url_for('appbuilder.static',filename='css/bootstrap.min.css')}}" rel="stylesheet">
        <link href="{{url_for('appbuilder.static',filename='css/font-awesome.min.css')}}" rel="stylesheet">
        {% if appbuilder.app_theme %}
           <link href="{{url_for('appbuilder.static',filename='css/themes/'+ appbuilder.app_theme )}}"  rel="stylesheet">
        {% endif %}

         <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
         <!--[if lt IE 9]>
            <script src="{{url_for('appbuilder.static',filename='js/html5shiv.js')}}"></script>
            <script src="{{url_for('appbuilder.static',filename='js/respond.min.js')}}"></script>
         <![endif]-->

        <link href="{{url_for('appbuilder.static',filename='datepicker/bootstrap-datepicker.css')}}" rel="stylesheet">
        <link href="{{url_for('appbuilder.static',filename='select2/select2.css')}}" rel="stylesheet">
        <link href="{{url_for('appbuilder.static',filename='css/flags/flags16.css')}}" rel="stylesheet">
        <link href="{{url_for('appbuilder.static',filename='css/ab.css')}}" rel="stylesheet">
    {% endblock %}
    {% block head_js %}
    
        <script>
        //ADDED - This global variable will be available to EVERY page AND scripts, INCLUDING MY_ab_filters.js and My_ab.js below...
        var js_locale_definitions = {
            'locale' : '{{gbl_locale_definitions.get_locale()|safe}}', //wraped with "'" to become javascript string
            'dec_sep' : '{{gbl_locale_definitions.get_dec_sep()|safe}}',
            'th_delim' : '{{gbl_locale_definitions.get_th_delim()|safe}}',
            'dt_delim' : '{{gbl_locale_definitions.get_dt_delim()|safe}}',
            'dt_pattern_for_cleave' : {{gbl_locale_definitions.get_dt_pattern_for_cleave()|safe}},  //already a javascript vector/array
            'dt_format_for_datepicker' : {{gbl_locale_definitions.get_dt_format_for_datepicker()|safe}} //already has "'" at start and end
        };    
        </script>    
    
        <script src="{{url_for('appbuilder.static',filename='js/jquery-latest.js')}}"></script>
        <script src="{{url_for('appbuilder.static',filename='js/bootstrap.min.js')}}"></script>        
        <script src="{{url_for('appbuilder.static',filename='datepicker/bootstrap-datepicker.js')}}"></script>
        <script src="{{url_for('static', filename='js/cleave1-5-3.min.js')}}"></script>  <!--  ADDED this javascript library -->
        
         <!-- THE  below js/datepicker_locale_js file SHOULD be loaded BEFORE MY_ab_filters.js -->
        {% set js_locale = gbl_locale_definitions.get_locale()|safe %}
        {% if js_locale == "pt_BR" %}
           {% set js_locale = "pt-BR" %}
        {% elif js_locale == "zh" %}
           {% set js_locale = "zh-CN" %}
        {% endif %}
        {% set datepicker_locale_js = "js/datepicker-locales/bootstrap-datetimepicker." + js_locale + ".js" %}
        <script src="{{url_for('static', filename=datepicker_locale_js)}}"></script>    <!--  ADDED this javascript library -->
        
        <script src="{{url_for('static',filename='js/MY_ab_filters.js')}}"></script>    <!--  REPLACES ab_filters.js -->  
         <!-- For now, KEEPING the original ab_filters.js along MY_ab_filters.js, because the "Security" menu requires that -->
        <script src="{{url_for('appbuilder.static',filename='js/ab_filters.js')}}"></script>  
        <script src="{{url_for('appbuilder.static',filename='js/ab_actions.js')}}"></script>
    {% endblock %}

</head>

<body >

{% block body %}
{% endblock %}


{% block tail_js %}
    <script src="{{url_for('appbuilder.static',filename='select2/select2.js')}}"></script>
    <script src="{{url_for('static',filename='js/MY_ab.js')}}"></script>                   <!--  REPLACES ab.js -->
    
{% endblock %}

{% block add_tail_js %}

{% endblock %}

{% block tail %}
{% endblock %}

  </body>
</html>
